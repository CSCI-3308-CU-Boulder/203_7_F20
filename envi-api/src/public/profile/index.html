<!DOCTYPE html>
<html>

<head>
  <title>Profile</title>
  <link rel="shortcut icon" type="image/png" href="../assets/favicon-32.png" />
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
  <link rel="stylesheet" href="../resources/css/envi_style.css" />

  <script src="./loadProfile.js" type="module"></script>

  <script>
    function loadBottles() {
      if (document.cookie.length > 0) {
        username = document.cookie.split('=')[1]
        axios
          .get("/users/" + username)
          .then(function (response) {
            // handle success
            console.log(response.data);
            // level = Math.floor(response.data.num_bottles / 5);
            // count = response.data.num_bottles % 5;
            setImage()
          })
          .catch(function (error) {
            // handle error
            console.log(error);
          })
      }
    }
  </script>

  <nav class="navbar navbar-light" style="background-color: #c5c3ba">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="../home">Home</a>
      </li>
    </ul>
    <ul class="nav navbar-nav navbar-right">
      <li style="text-align:right">
        <a href="#logout_modal" data-toggle="modal">
          <img class="pull-right" src="../assets/profile_pic_placeholder.gif" id="navbar_profile">
        </a>
      </li>
    </ul>
  </nav>
</head>

<body onload="loadProfile()">
  <!-- Logout Modal -->
  <div id="logout_modal" class="modal logout-modal" style="backdrop-filter: none;">
    <div role="document">
      <div class="modal-content">
        <div class="modal-header" id="modal_header"
          style="max-height: 40px; display: flex; align-items: center; border: none;">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" id="modal_body"
          style="max-height: 70px; display: flex; align-items: center; border: none;">
          <a style="color: #297562; font-size: large" id="logout_name">You are not logged in.</a>
        </div>
        <div class="modal-footer" id="lgout_buttons"
          style="max-height: 70px; display: flex; align-items: center; border: none;">
          <a href="../login">
            <button type="button" class="button">Log In</button></a>
          <a href="../signup">
            <button type="button" class="button">Sign Up</button></a>
        </div>
      </div>
    </div>
  </div>

  <!-- Side Navigation -->
  <div class="sidenav" style="width: 250px">
    <br />
    <br />
    <br />
    <br />
    <p>
      <a href="../home">
        <img src="../assets/envi.png" alt="envi logo" width="200px" height="200px"
          style="margin-top: -100px; margin-left: 25px; margin-bottom: 20px" />
      </a>
    </p>
    <a href="../profile" class="sidenav-button" style="margin-top: -10px">Profile</a>
    <a href="../tracking" class="sidenav-button" style="margin-top: 10px">Tracking</a>
    <a href="../friends" class="sidenav-button" style="margin-top: 10px">Friends</a>
    <a href="../donate" class="sidenav-button" style="margin-top: 10px">Donate</a>
  </div>

  <div class="d-flex align-items-start">
    <div class="container" id="main" style="margin-left: 250px">
      <br />
      <div class="row">
        <div class="col">
          <div class="row">
            <div class="col-6">
              <!-- <div class="sm-12 md-2 lg-2 columns"> -->

              <!-- User Profile Image -->
              <div class="container" id="profile_picture"></div>

              <!-- </div> -->
            </div>
            <div class="col-6" style="padding-left: 0px">
              <div class="container" id="basic_info">
                <div class="card-6 theme-light" style="border-radius: calc(0.75rem - 1px)">
                  <div class="theme-dark card-header" style="
                    border-radius: calc(0.75rem - 1px) calc(0.75rem - 1px) 0
                    0;
                    ">
                    <h4 id="username"></h4>
                  </div>
                  <div class="card-body">
                    <h6 id="name">Example User</h6>
                    <p class="card-title" id="impact_points"></p>
                    <!-- <p class="card-title" id="level"></p> -->
                    <!-- <p class="card-title" id="bottles_filled"></p> -->
                  </div>
                  <div class="card-body text-center" style="padding-top: 0px">
                    <a href="#myModal" onclick=populateModal() class="button" data-toggle="modal">Update Profile</a>
                  </div>
                  <!-- Modal HTML -->
                  <div id="myModal" class="modal fade">
                    <div class="modal-dialog modal-login">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h4 class="modal-title">Update Info</h4>
                          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            &times;
                          </button>
                        </div>
                        <!-- The grid: four columns -->
                        <a style="padding-left: 5%; padding-top: 5%"> Choose a new profile image: </a>
                        <div onclick="choosePicture()" style="padding: 5%">
                          <div class="row">
                            <div class="col">
                              <img src="../assets/colorEarth.jpg" width="100" id="0">
                            </div>
                            <div class="col">
                              <img src="../assets/waterBottleProfile.jpg" width="100" id="1">
                            </div>
                            <div class="col">
                              <img src="../assets/environmentalist.jpg" width="100" id="2">
                            </div>
                            <div class="col">
                              <img src="../assets/flatirons.png" width="100" id="3">
                            </div>
                            <div class="col">
                              <img src="../assets/flowers.jpg" width="100" id="4">
                            </div>
                          </div>
                          <div class="row">
                            <div class="col">
                              <img src="../assets/hydroflask.jpg" width="100" id="5">
                            </div>
                            <div class="col">
                              <img src="../assets/ice.jpg" width="100" id="6">
                            </div>
                            <div class="col">
                              <img src="../assets/mountains.png" width="100" id="7">
                            </div>
                            <div class="col">
                              <img src="../assets/plant.jpg" width="100" id="8">
                            </div>
                            <div class="col">
                              <img src="../assets/recycling.jpeg" width="100" id="9">
                            </div>
                          </div>
                        </div>

                        <div class="modal-body">
                          <div class="form-group">
                            Username:
                            <input onkeyup=usernameValid() type="text" id="modal_username"
                              class="rounded-all form-control" name="username" placeholder="Username"
                              required="required" />
                          </div>
                          <div class="form-group">
                            Name:
                            <input type="text" id="modal_name" class="rounded-all form-control" name="name"
                              placeholder="Name" required="required" />
                          </div>
                          <!-- <div class="form-group">
                            <input id="cpsw" type="password" class="form-control" name="confirm password"
                            placeholder="Confirm Password" required="required">
                          </div> -->
                          <div class="form-group text-center">
                            <button type="button" id="my_submit_button" class="button" onclick="updateProfileInfo()">
                              Update Profile
                            </button>
                          </div>
                        </div>
                        <!-- <div class="modal-footer">
                      <div id="message" style="display:block">
                        <h3>Password must contain the following:</h3>
                        <p id="letter" class="invalid">A <b>lowercase</b> letter</p>
                        <p id="capital" class="invalid">A <b>capital (uppercase)</b> letter</p>
                        <p id="number" class="invalid">A <b>number</b></p>
                        <p id="length" class="invalid">Minimum <b>8 characters</b></p>
                        <p id="match" class="invalid">Password and Confirm Password Match</p>
                      </div>
                    </div> -->
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <div id="achievements"></div>
            </div>
          </div>
        </div>
        <div class="col-5">
          <div class="container" style="width:120%">
            <div class="theme-light rounded-all container p-4 border">
              <div class="card-6 theme-light" style="border-radius: calc(0.75rem - 1px)">
                <h3>What are Impact Points?</h3>
                <p>Impact points are a way to see how much your efforts are benefitting the planet. You can earn anywhere between 1 and 3 points
                  depending on the type of task. When you reach a certain number of points, they get displayed here and describe the good that you have done
                  for the environment. Every point counts, so navigate to the tracking page and start earning your impact points!
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
  </div>

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <!-- Popper JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

  <!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <!-- Axios -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <!-- JS-Cookie -->
  <script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>

  <script src="../resources/js/utilities.js"></script>
  <script src="../resources/js/navbar.js"></script>
  <script src="./loadProfile.js"></script>
  <script src="./updateProfile.js"></script>

</body>

</html>